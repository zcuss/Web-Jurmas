<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Kalkulator Bahan</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="d-flex flex-column min-vh-100">
  <%- include('-partials/sidebar', { currentRoute: currentRoute }) %>

  <div class="main-content flex-grow-1 p-4" style="margin-left: 250px;">
    <div class="container">
      <h1 class="mb-4">Kalkulator Bahan
      </h1>

      <form action="/kalkulator" method="POST" class="row g-3 mb-4">
        <div class="col-md-6">
          <label for="kategori" class="form-label">Jenis Masakan</label>
          <select class="form-select" name="kategori" id="kategori" required>
            <option value="" disabled <%= !selected ? "selected" : "" %>>Pilih Kategori</option>
            <% kategoriList.forEach(k => { %>
              <option value="<%= k %>" <%= selected === k ? "selected" : "" %>><%= k.charAt(0).toUpperCase() + k.slice(1) %></option>
            <% }) %>
          </select>
        </div>
        <div class="col-md-4">
          <label for="jumlah" class="form-label">Jumlah Masakan</label>
          <input type="number" min="1" class="form-control" name="jumlah" id="jumlah" value="<%= jumlah || 1 %>" required />
        </div>
        <div class="col-md-2 d-flex align-items-end">
          <button type="submit" class="btn btn-primary w-100">Hitung</button>
        </div>
      </form>

      <% if (hasil) { %>
        <div class="alert alert-success">
          <strong>Total Harga Jual:</strong> Rp <%= totalHarga.toLocaleString("id-ID") %>
        </div>
        <div class="card mb-4">
          <div class="card-header">
            Hasil Kebutuhan Bahan
          </div>
          <ul class="list-group list-group-flush">
            <% hasil.forEach(item => { %>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <%= item.name %>
                <span class="badge bg-success"><%= item.total %></span>
              </li>
            <% }) %>
          </ul>
        </div>
      
        
      <% } %>
      
    </div>
  </div>
</body>
</html>
